<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·∫øt B√≠nh Ng·ªç 2026 - Xu√¢n V·∫°n Ph√∫c</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <!-- Th∆∞ vi·ªán ch·ª•p ·∫£nh m√†n h√¨nh -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>

    <!-- Canvas Ph√°o Hoa -->
    <canvas id="fireworks"></canvas>
    <!-- Nh·∫°c n·ªÅn -->
    <audio id="tet-music" loop src="vansunhuy.mp3"></audio> <!-- Link nh·∫°c demo, b·∫°n c√≥ th·ªÉ thay link nh·∫°c T·∫øt mp3 c·ªßa b·∫°n -->
    <!-- Hi·ªáu ·ª©ng hoa ƒë√†o r∆°i -->
    <div id="blossom-container"></div>

    <!-- N√∫t Menu Mobile (Floating) & Overlay -->
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
    </button>
    <div class="mobile-overlay" id="mobile-overlay" onclick="toggleMobileMenu(false)"></div>

    <!-- LANDING PAGE (TRANG CH·ª¶ GI·ªöI THI·ªÜU) -->
    <section id="landing-page">
        <div class="landing-content">
            <p><strong>Vui l√≤ng nh·∫•n F11 - Fullscreen ƒë·ªÉ tƒÉng tr·∫£i nghi·ªám b√™n m√°y t√≠nh nh√©!</strong></p>
            <h2 class="landing-title">T·∫æT AI 2026</h2>
            <p class="landing-subtitle">K·∫æT N·ªêI TRUY·ªÄN TH·ªêNG - TR·∫¢I NGHI·ªÜM T∆Ø∆†NG LAI S·ªê</p>
            <div class="landing-desc">
                <p>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi c·ªïng gi·∫£i tr√≠ T·∫øt B√≠nh Ng·ªç 2026 - N∆°i truy·ªÅn th·ªëng h·ªôi t·ª• c√¥ng ngh·ªá!</p>
                <p style="margin-top: 10px;">‚ú® <strong>Tr·ª£ l√Ω AI:</strong> Ch√∫c T·∫øt, L√†m th∆°, Gieo qu·∫ª, Xem tu·ªïi x√¥ng ƒë·∫•t.</p>
                <p>üßß <strong>L√¨ X√¨ 4.0:</strong> Chia ti·ªÅn ng·∫´u nhi√™n, T·∫°o QR Code, Game sƒÉn l·ªôc.</p>
                <p>üé® <strong>S√°ng t·∫°o & K·∫øt n·ªëi:</strong> V·∫Ω tranh AI, ƒê·ªë vui v·ªÅ t·∫øt, L√¨ x√¨ ch√©o.</p>
                <p>üèÉ <strong>S·ª©c kh·ªèe:</strong> R√®n luy·ªán th·ªÉ thao v·ªõi nh·∫°c n·ªÅn s√¥i ƒë·ªông.</p>
                <p style="color: yellow;"><strong>NGHI√äM C·∫§M:</strong> KH√îNG S·ª¨ D·ª§NG WEB N√ÄY ƒê√ÅNH L√î ƒê·ªÄ, M√ä T√çNH D·ªä ƒêOAN, HO·∫†T ƒê·ªòNG C·ªú B·∫†C C√Å C∆Ø·ª¢C<BR>T√ÅC GI√Å KH√îNG CH·ªäU TR√ÅCH NHI·ªÜM N·∫æU NG∆Ø·ªúI D√ôNG VI PH·∫†M PH√ÅP LU·∫¨T </p>
            </div>
            
            <!-- N√∫t ƒêƒÉng Nh·∫≠p / V√†o Trang -->
            <div class="landing-actions" style="display: flex; flex-direction: column; gap: 15px; align-items: center; width: 100%; max-width: 350px; margin: 0 auto;">
                <!-- Google Login -->
                <button onclick="loginGoogleAndEnter()" class="landing-btn" style="background: #fff; color: #444; font-size: 1rem; padding: 12px 20px; width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px; text-transform: none; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                    <i class="fab fa-google" style="color: #DB4437;"></i> ƒêƒÉng nh·∫≠p Google
                </button>

                <!-- No Login -->
                <button onclick="enterWebsite()" style="background: transparent; border: none; color: rgba(255,255,255,0.7); text-decoration: underline; cursor: pointer; font-size: 0.9rem; margin-top: 5px;">Kh√¥ng ƒëƒÉng nh·∫≠p (Ch·∫ø ƒë·ªô kh√°ch)</button>
            </div>
        </div>
        <div class="landing-overlay"></div>
    </section>

    <div class="app-container">
        <!-- SIDEBAR MENU -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-robot" style="margin-right: 10px;"></i>T·∫øt AI 2026</h1>
                <h2 style="font-size: 0.7rem; letter-spacing: 1px; margin-top: 5px;">K·∫æT N·ªêI TRUY·ªÄN TH·ªêNG 
                    <br>TR·∫¢I NGHI·ªÜM T∆Ø∆†NG LAI S·ªê</h2>
                                <p style="font-size: 0.7rem; letter-spacing: 1px; margin-top: 5px;"><strong>Vui l√≤ng nh·∫•n F11 - Fullscreen ƒë·ªÉ tƒÉng tr·∫£i nghi·ªám b√™n m√°y t√≠nh nh√©!</strong></p>
                <button class="close-sidebar-btn" onclick="toggleMobileMenu(false)">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- User Login Section (Sidebar) -->
            <div id="sidebar-user-section" style="padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.2);">
                <div id="login-btn-container">
                    <button onclick="openLoginModal()" class="sidebar-login-btn">
                        <i class="fas fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p
                    </button>
                </div>
                
                <div id="user-info" class="hidden" onclick="toggleUserDropdown(event)">
                    <img id="user-avatar" src="" alt="Avatar">
                    <div class="user-text-info">
                        <span style="font-size: 0.7rem; color: #ccc;">Xin ch√†o,</span>
                        <span id="user-name"></span>
                    </div>
                    <i class="fas fa-chevron-down" style="font-size: 0.8rem; margin-left: auto;"></i>
                    
                    <!-- Dropdown Menu -->
                    <div id="user-dropdown-menu" class="dropdown-content">
                        <!-- Khu v·ª±c hi·ªÉn th·ªã User/Pass ·∫®n danh -->
                        <div id="anon-creds-info" style="display: none; padding: 10px; background: rgba(255,255,255,0.1); border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 0.85rem;">
                            <div style="color: #ccc;">User: <strong id="menu-anon-user" style="color: var(--tet-gold);"></strong></div>
                            <div style="color: #ccc;">Pass: <strong id="menu-anon-pass" style="color: var(--tet-gold);"></strong></div>
                        </div>
                        <a href="#" onclick="openProfileModal()"><i class="fas fa-id-badge"></i> H·ªì s∆° c·ªßa t√¥i</a>
                        <a href="#" onclick="openLeaderboardModal()"><i class="fas fa-history"></i> L·ªãch s·ª≠ ƒëi·ªÉm s·ªë</a>
                        <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 5px 0;">
                        <a href="#" onclick="logout()" style="color: #ff6b6b;"><i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t</a>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-btn active" onclick="switchTab('countdown-section')"><i class="fas fa-clock"></i> ƒê·∫øm Ng∆∞·ª£c</button>
                <button class="nav-btn" onclick="switchTab('tet-prep')"><i class="fas fa-clipboard-list"></i> Vi·ªác C·∫ßn L√†m</button>
                <button class="nav-btn" onclick="switchTab('ai-wishes')"><i class="fas fa-robot"></i> Tr·ª£ L√Ω Ch√∫c T·∫øt</button>
                <button class="nav-btn" onclick="switchTab('lixi-allocator')"><i class="fas fa-money-bill-wave"></i> Chia L√¨ X√¨</button>
                <button class="nav-btn" onclick="switchTab('fortune-telling')"><i class="fas fa-scroll"></i> Gieo Qu·∫ª</button>
                <button class="nav-btn" onclick="switchTab('first-footing')"><i class="fas fa-door-open"></i> Xem X√¥ng ƒê·∫•t</button>
                <button class="nav-btn" onclick="switchTab('guess-game')"><i class="fas fa-question-circle"></i> ƒêo√°n L√¨ X√¨</button>
                <button class="nav-btn" onclick="switchTab('catch-lixi-game')"><i class="fas fa-gamepad"></i> Game H·ª©ng L·ªôc</button>
                <button class="nav-btn" onclick="switchTab('tet-quiz')"><i class="fas fa-puzzle-piece"></i> ƒê·ªë Vui T·∫øt</button>
                <button class="nav-btn" onclick="switchTab('exercise-section')"><i class="fas fa-running"></i> T·∫≠p Th·ªÉ D·ª•c</button>
                <button class="nav-btn" onclick="switchTab('ai-image-gen')"><i class="fas fa-paint-brush"></i> T·∫°o ·∫¢nh T·∫øt AI</button>
                <button class="nav-btn" onclick="switchTab('tet-card-creator')"><i class="fas fa-id-card"></i> Thi·ªáp T·∫øt Online</button>
                <button class="nav-btn" onclick="switchTab('exchange-challenge')"><i class="fas fa-random"></i> L√¨ X√¨ Ch√©o</button>
                <button class="nav-btn" onclick="switchTab('vietqr-generator')"><i class="fas fa-qrcode"></i> T·∫°o QR Code</button>
            </nav>
            <div class="sidebar-footer">
                <p>Code b·ªüi Tri·∫øt V√µ (Gemini Support)</p>
                <div style="display: flex; gap: 5px; justify-content: center; margin-top: 10px;">
                    <a href="https://github.com/trietpko2002/web_tet_ai_cong_nghe_so" target="_blank" style="color: white; text-decoration: none; background: #333; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem;"><i class="fab fa-github"></i> GitHub</a>
                    <button onclick="donate()" style="background: #e91e63; color: white; border: none; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; cursor: pointer;"><i class="fas fa-heart"></i> Donate</button>
                    <button onclick="shareWebsite()" style="background: #1877f2; color: white; border: none; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; cursor: pointer;"><i class="fas fa-share-alt"></i> Share</button>
                </div>
                <div style="margin-top: 10px;">
                    <button onclick="openApiSettings()" style="background: #333; color: #ccc; border: 1px solid #555; padding: 5px 10px; border-radius: 5px; font-size: 0.7rem; cursor: pointer; width: 100%;">
                        <i class="fas fa-key"></i> C√†i ƒë·∫∑t API Key
                    </button>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main class="content-area">
            <!-- Music Credit (Ch·∫°y ch·ªØ) -->
            <div class="music-credit-bar">
                <div class="music-credit-text">----------üéµ ƒêang ph√°t: Tr√∫c Nh√¢n, DTAP | V·∫†N S·ª∞ NH∆Ø √ù üéµ  ----------  <strong>NGHI√äM C·∫§M:</strong> KH√îNG S·ª¨ D·ª§NG WEB N√ÄY ƒê√ÅNH L√î ƒê·ªÄ, M√ä T√çNH D·ªä ƒêOAN, HO·∫†T ƒê·ªòNG C·ªú B·∫†C C√Å C∆Ø·ª¢C, T√ÅC GI√Å KH√îNG CH·ªäU TR√ÅCH NHI·ªÜM N·∫æU NG∆Ø·ªúI D√ôNG VI PH·∫†M PH√ÅP LU·∫¨T----------</div>
            </div>

            <!-- 1. ƒê·∫øm ng∆∞·ª£c -->
            <section id="countdown-section" class="card tab-content active">
                <h3><i class="fas fa-clock"></i> ƒê·∫øm Ng∆∞·ª£c Giao Th·ª´a 2026</h3>
                
                <div id="timer-container">
                    <div class="timer-wrapper">
                        <div class="timer-box"><span id="days">00</span><div class="label">Ng√†y</div></div>
                        <div class="timer-box"><span id="hours">00</span><div class="label">Gi·ªù</div></div>
                        <div class="timer-box"><span id="minutes">00</span><div class="label">Ph√∫t</div></div>
                        <div class="timer-box"><span id="seconds">00</span><div class="label">Gi√¢y</div></div>
                    </div>
                    <div class="tet-info">
                        <p><i class="fas fa-calendar-check" style="color: var(--tet-red);"></i> <strong>M√πng 1 T·∫øt:</strong> 17/02/2026 (D∆∞∆°ng l·ªãch)</p>
                        <div style="margin-top: 10px; text-align: left; display: inline-block; border-top: 1px dashed #ccc; padding-top: 10px;">
                            <p><i class="fas fa-landmark" style="color: var(--tet-red);"></i> <strong>C√¥ng ch·ª©c/Nh√† n∆∞·ªõc:</strong> 7 ng√†y (29 T·∫øt - H·∫øt M√πng 5).</p>
                            <p><i class="fas fa-user-graduate" style="color: var(--tet-red);"></i> <strong>H·ªçc sinh:</strong> 10-14 ng√†y (Theo l·ªãch ƒë·ªãa ph∆∞∆°ng).</p>
                            <p><i class="fas fa-industry" style="color: var(--tet-red);"></i> <strong>C√¥ng nh√¢n/Lao ƒë·ªông:</strong> 5 ng√†y + ngh·ªâ b√π (Theo quy ƒë·ªãnh).</p>
                        </div>
                    </div>
                </div>

                <!-- Hi·ªÉn th·ªã khi ƒë·∫øn gi·ªù G -->
                <div id="happy-new-year" class="hidden">
                    <h1 class="hny-text">CH√öC M·ª™NG NƒÇM M·ªöI!</h1>
                    <h2 class="hny-sub">Xu√¢n B√≠nh Ng·ªç - 2026</h2>
                    <p>K√≠nh ch√∫c qu√Ω v·ªã m·ªôt nƒÉm m·ªõi An Khang Th·ªãnh V∆∞·ª£ng - V·∫°n S·ª± Nh∆∞ √ù</p>
                </div>
            </section>

            <!-- 1.5. Vi·ªác C·∫ßn L√†m (22-29 T·∫øt) -->
            <section id="tet-prep" class="card tab-content">
                <h3><i class="fas fa-clipboard-list"></i> L·ªãch Tr√¨nh ƒÇn T·∫øt (Tr∆∞·ªõc & Trong T·∫øt)</h3>
                <div id="tet-tasks-container" class="task-list"></div>
            </section>

            <!-- 2. T·∫°o l·ªùi ch√∫c AI -->
            <section id="ai-wishes" class="card tab-content">
                <h3><i class="fas fa-robot"></i> Tr·ª£ L√Ω Ch√∫c T·∫øt AI</h3>
                <div class="controls">
                    <select id="wish-target">
                        <option value="family">√îng B√†/Cha M·∫π</option>
                        <option value="friend">B·∫°n B√®/ƒê·ªìng Nghi·ªáp</option>
                        <option value="lover">Ng∆∞·ªùi Y√™u</option>
                        <option value="boss">S·∫øp/ƒê·ªëi T√°c</option>
                        <option value="self">B·∫£n Th√¢n</option>
                    </select>
                    <select id="wish-style">
                        <option value="formal">Trang tr·ªçng</option>
                        <option value="funny">H√†i h∆∞·ªõc/B√° ƒë·∫°o</option>
                        <option value="emotional">T√¨nh c·∫£m/S√¢u s·∫Øc</option>
                    </select>
                    <select id="wish-length">
                        <option value="short">Ng·∫Øn g·ªçn (1-2 c√¢u)</option>
                        <option value="medium" selected>V·ª´a ph·∫£i</option>
                        <option value="long">D√†i (T√¢m th∆∞)</option>
                    </select>
                    <select id="wish-theme">
                        <option value="general">Ch·ªß ƒë·ªÅ: T·ªïng h·ª£p</option>
                        <option value="money">Ch·ªß ƒë·ªÅ: T√†i l·ªôc & Gi√†u sang</option>
                        <option value="health">Ch·ªß ƒë·ªÅ: S·ª©c kh·ªèe & B√¨nh an</option>
                        <option value="love">Ch·ªß ƒë·ªÅ: T√¨nh duy√™n & H·∫°nh ph√∫c</option>
                    </select>
                </div>
                <div class="controls" style="justify-content: center;">
                    <button onclick="generateWish('text')"><i class="fas fa-pen-nib"></i> L·ªùi Ch√∫c</button>
                    <button onclick="generateWish('poem')"><i class="fas fa-scroll"></i> L√†m Th∆°</button>
                    <button onclick="generateWish('couplet')"><i class="fas fa-columns"></i> C√¢u ƒê·ªëi</button>
                </div>
                <div id="wish-result" class="result-box hidden"></div>
                <p class="ai-disclaimer">*L∆∞u √Ω: N·ªôi dung do AI t·∫°o ra mang t√≠nh ch·∫•t tham kh·∫£o v√† gi·∫£i tr√≠, c√≥ th·ªÉ ch·ª©a sai s√≥t.</p>
            </section>

            <!-- 3. Chia bao l√¨ x√¨ -->
            <section id="lixi-allocator" class="card tab-content">
                <h3><i class="fas fa-money-bill-wave"></i> Chia L√¨ X√¨ Ng·∫´u Nhi√™n</h3>
                <div class="controls">
                    <input type="number" id="total-money" placeholder="T·ªïng ti·ªÅn (VNƒê)">
                    <input type="number" id="total-packets" placeholder="S·ªë l∆∞·ª£ng bao">
                    <button onclick="allocateMoney()">Chia Ti·ªÅn</button>
                    <button id="btn-reallocate" onclick="allocateMoney()" class="hidden" style="background: var(--tet-gold); color: #d00000; margin-left: 5px;"><i class="fas fa-sync-alt"></i> Chia L·∫°i</button>
                </div>
                <div id="lixi-result" class="result-grid hidden"></div>
                <div class="legal-warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>C·∫¢NH B√ÅO:</strong> T√≠nh nƒÉng n√†y ch·ªâ ƒë·ªÉ chia vui ng·∫´u nhi√™n ng√†y T·∫øt. Nghi√™m c·∫•m s·ª≠ d·ª•ng ƒë·ªÉ t·ªï ch·ª©c c√° c∆∞·ª£c, ƒë√°nh b·∫°c ƒÉn ti·ªÅn d∆∞·ªõi m·ªçi h√¨nh th·ª©c.
                </div>
            </section>

            <!-- 4. Gieo qu·∫ª AI -->
            <section id="fortune-telling" class="card tab-content">
                <h3><i class="fas fa-scroll"></i> Gieo Qu·∫ª ƒê·∫ßu NƒÉm</h3>
                <div class="controls">
                    <input type="number" id="fortune-age" placeholder="Tu·ªïi √¢m l·ªãch (VD: 25)">
                    <select id="fortune-gender">
                        <option value="male">Nam m·∫°ng</option>
                        <option value="female">N·ªØ m·∫°ng</option>
                    </select>
                    <select id="fortune-topic">
                        <option value="general">T·ªïng qu√°t nƒÉm 2026</option>
                        <option value="love">T√¨nh duy√™n / Gia ƒë·∫°o</option>
                        <option value="career">C√¥ng danh / S·ª± nghi·ªáp</option>
                        <option value="money">T√†i l·ªôc / Ti·ªÅn b·∫°c</option>
                    </select>
                </div>
                <p style="text-align: center; margin-bottom: 10px;">Th√†nh t√¢m kh·∫•n nguy·ªán v√† b·∫•m n√∫t b√™n d∆∞·ªõi</p>
                <button onclick="getFortune()" class="shake-btn">Xin Qu·∫ª</button>
                <div id="fortune-result" class="result-box hidden"></div>
                <p class="ai-disclaimer">*L∆∞u √Ω: Qu·∫ª b√≥i ch·ªâ mang t√≠nh ch·∫•t gi·∫£i tr√≠, vui xu√¢n.</p>
                <div class="legal-warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>L∆ØU √ù:</strong> K·∫øt qu·∫£ ch·ªâ mang t√≠nh gi·∫£i tr√≠. Kh√¥ng s·ª≠ d·ª•ng cho m·ª•c ƒë√≠ch m√™ t√≠n d·ªã ƒëoan ho·∫∑c lu·∫≠n s·ªë l√¥ ƒë·ªÅ, c·ªù b·∫°c.
                </div>
            </section>

            <!-- 5. X√¥ng ƒë·∫•t ƒë·∫ßu nƒÉm -->
            <section id="first-footing" class="card tab-content">
                <h3><i class="fas fa-door-open"></i> Xem Tu·ªïi X√¥ng ƒê·∫•t</h3>
                <div class="controls">
                    <input type="number" id="owner-input" placeholder="Nh·∫≠p nƒÉm sinh gia ch·ªß (VD: 1985)">
                    <select id="owner-gender">
                        <option value="male">Nam m·∫°ng</option>
                        <option value="female">N·ªØ m·∫°ng</option>
                    </select>
                    <button onclick="suggestFirstFooting()">T√¨m Tu·ªïi H·ª£p</button>
                </div>
                <div id="footing-result" class="result-box hidden"></div>
                <p class="ai-disclaimer">*L∆∞u √Ω: Th√¥ng tin phong th·ªßy do AI t·ªïng h·ª£p, ch·ªâ mang t√≠nh tham kh·∫£o.</p>
            </section>

            <!-- 6. ƒêo√°n l√¨ x√¨ (Troll) -->
            <section id="guess-game" class="card tab-content">
                <h3><i class="fas fa-question-circle"></i> Th·ª≠ Th√°ch ƒêo√°n L√¨ X√¨</h3>
                <div class="controls">
                    <input type="number" id="user-age" placeholder="Nh·∫≠p tu·ªïi c·ªßa b·∫°n">
                    <div style="display: flex; align-items: center; gap: 5px; margin: 0 10px; background: rgba(255,255,255,0.5); padding: 0 10px; border-radius: 5px;">
                        <input type="checkbox" id="troll-mode" style="width: auto; flex: none; margin: 0;">
                        <label for="troll-mode" style="cursor: pointer; user-select: none; color: var(--tet-red); font-weight: bold;">B·∫≠t Troll</label>
                    </div>
                    <button onclick="playGuessGame()">M·ªü Bao</button>
                </div>
                <div id="guess-result" class="result-box hidden"></div>
                <div class="legal-warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>TU√ÇN TH·ª¶ PH√ÅP LU·∫¨T:</strong> Game ch·ªâ mang t√≠nh gi·∫£i tr√≠ vui v·∫ª. Nghi√™m c·∫•m h√†nh vi c√° c∆∞·ª£c d·ª±a tr√™n k·∫øt qu·∫£ game.
                </div>
            </section>

            <!-- NEW: Game H·ª©ng L·ªôc -->
            <section id="catch-lixi-game" class="card tab-content">
                <h3><i class="fas fa-gamepad"></i> Minigame: H·ª©ng L·ªôc ƒê·∫ßu NƒÉm</h3>
                <p style="text-align: center;">Di chuy·ªÉn chu·ªôt/tay ƒë·ªÉ h·ª©ng bao l√¨ x√¨, tr√°nh ph√°o n·ªï nh√©!</p>
                <div id="game-container" style="position: relative; height: 400px; background: rgba(0,0,0,0.1); border-radius: 10px; overflow: hidden; cursor: none;">
                    <canvas id="game-canvas"></canvas>
                    <div id="game-ui" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                        <button onclick="startGame()" style="font-size: 1.2rem; padding: 15px 30px;">B·∫Øt ƒê·∫ßu Ch∆°i</button>
                    </div>
                    <div id="score-board" style="position: absolute; top: 10px; left: 10px; font-weight: bold; color: var(--tet-red); font-size: 1.2rem;">ƒêi·ªÉm: 0</div>
                    <div id="game-timer-display" style="position: absolute; top: 10px; right: 10px; font-weight: bold; color: var(--tet-red); font-size: 1.2rem;">60s</div>
                </div>
                <div class="legal-warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>C·∫¢NH B√ÅO:</strong> Tr√≤ ch∆°i gi·∫£i tr√≠ l√†nh m·∫°nh. Nghi√™m c·∫•m c√°c h√†nh vi c√° ƒë·ªô, ƒë·∫∑t c∆∞·ª£c d·ª±a tr√™n ƒëi·ªÉm s·ªë.
                </div>
            </section>

            <!-- NEW: ƒê·ªë Vui T·∫øt -->
            <section id="tet-quiz" class="card tab-content">
                <h3><i class="fas fa-puzzle-piece"></i> ƒê·ªë Vui Ng√†y T·∫øt AI</h3>
                <div class="controls">
                    <select id="quiz-topic">
                        <option value="tradition">Phong t·ª•c truy·ªÅn th·ªëng</option>
                        <option value="food">·∫®m th·ª±c ng√†y T·∫øt</option>
                        <option value="history">S·ª± t√≠ch & L·ªãch s·ª≠</option>
                        <option value="funny">ƒê·ªë vui h√†i h∆∞·ªõc/M·∫πo</option>
                    </select>
                    <select id="quiz-difficulty">
                        <option value="easy">D·ªÖ</option>
                        <option value="medium">Trung b√¨nh</option>
                        <option value="hard">Kh√≥ (Th·ª≠ th√°ch)</option>
                    </select>
                    <button onclick="generateTetQuiz()">T·∫°o C√¢u H·ªèi</button>
                </div>
                
                <!-- Ch·ªçn nhanh ch·ªß ƒë·ªÅ -->
                <div class="controls" style="justify-content: center; margin-top: 10px; gap: 5px;">
                    <button onclick="generateTetQuiz('tradition')"><i class="fas fa-star"></i> Phong T·ª•c</button>
                    <button onclick="generateTetQuiz('food')"><i class="fas fa-utensils"></i> ·∫®m Th·ª±c</button>
                    <button onclick="generateTetQuiz('funny')"><i class="fas fa-laugh"></i> H√†i H∆∞·ªõc</button>
                    <button onclick="generateTetQuiz('random')"><i class="fas fa-random"></i> Ng·∫´u Nhi√™n</button>
                </div>

                <!-- Ch·ªçn ch·∫ø ƒë·ªô Th·ª≠ th√°ch -->
                <h4 style="text-align: center; margin-top: 15px; color: var(--tet-red); border-top: 1px dashed #ccc; padding-top: 10px;">CH·∫æ ƒê·ªò TH·ª¨ TH√ÅCH (L∆ØU ƒêI·ªÇM)</h4>
                <div class="controls" style="justify-content: center; margin-top: 5px; gap: 10px;">
                    <button onclick="startQuizChallenge(10, 1)" style="background: linear-gradient(45deg, #4caf50, #81c784);">10 C√¢u / 1 Ph√∫t</button>
                    <button onclick="startQuizChallenge(20, 5)" style="background: linear-gradient(45deg, #ff9800, #ffb74d);">20 C√¢u / 5 Ph√∫t</button>
                    <button onclick="startQuizChallenge(30, 10)" style="background: linear-gradient(45deg, #f44336, #e57373);">30 C√¢u / 10 Ph√∫t</button>
                </div>

                <div class="controls" style="justify-content: center; margin-top: 15px;">
                    <button onclick="openLeaderboardModal()" style="background: #673ab7; color: #fff;"><i class="fas fa-trophy"></i> Xem B·∫£ng X·∫øp H·∫°ng</button>
                </div>

                <div id="challenge-status" class="hidden" style="text-align: center; margin-top: 15px; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; border: 1px dashed var(--tet-gold); color: #fff;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #d00000;" id="quiz-timer">00:00</div>
                    <div style="font-size: 1rem;">C√¢u: <span id="quiz-progress">0/0</span> | ƒêi·ªÉm: <span id="quiz-score">0</span></div>
                </div>
                <div id="quiz-container" class="hidden" style="margin-top: 20px;"></div>
                <div class="legal-warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>L∆ØU √ù:</strong> Kh√¥ng s·ª≠ d·ª•ng k·∫øt qu·∫£ ƒë·ªë vui ƒë·ªÉ c√° c∆∞·ª£c ƒÉn ti·ªÅn tr√°i ph√°p lu·∫≠t.
                </div>
            </section>

            <!-- NEW: T·∫°o ·∫¢nh T·∫øt AI -->
            <section id="ai-image-gen" class="card tab-content">
                <h3><i class="fas fa-magic"></i> Chuy√™n Gia T·∫°o L·ªánh ·∫¢nh (Prompt)</h3>
                <p style="text-align: center; font-size: 0.9rem; color: #666; margin-bottom: 15px;">AI s·∫Ω gi√∫p b·∫°n vi·∫øt c√¢u l·ªánh ti·∫øng Anh chu·∫©n nh·∫•t ƒë·ªÉ t·∫°o ·∫£nh ƒë·∫πp tr√™n Midjourney, DALL-E 3, Bing Image Creator...</p>
                
                <div class="controls">
                    <input type="text" id="img-prompt" placeholder="M√¥ t·∫£ √Ω t∆∞·ªüng ch√≠nh (VD: Gia ƒë√¨nh g√≥i b√°nh ch∆∞ng, R·ªìng v√†ng bay l∆∞·ª£n)...">
                </div>
                
                <div class="controls">
                    <select id="prompt-style">
                        <option value="">-- Ch·ªçn Phong c√°ch --</option>
                        <option value="Hyper-realistic, 8k, highly detailed">Th·ª±c t·∫ø (Hyper-realistic)</option>
                        <option value="Anime style, Studio Ghibli, vibrant">Anime / Ghibli</option>
                        <option value="3D render, Pixar style, C4D, Unreal Engine">3D Cute (Pixar)</option>
                        <option value="Oil painting, textured, impasto">Tranh S∆°n D·∫ßu</option>
                        <option value="Cyberpunk, neon lights, futuristic">Cyberpunk / T∆∞∆°ng lai</option>
                        <option value="Vintage, film grain, retro 90s">Vintage / Ho√†i c·ªï</option>
                        <option value="Watercolor, soft edges, pastel">Tranh M√†u n∆∞·ªõc</option>
                        <option value="Traditional Vietnamese Dong Ho painting style">Tranh ƒê√¥ng H·ªì</option>
                    </select>
                    <select id="prompt-mood">
                        <option value="">-- Ch·ªçn C·∫£m x√∫c/Kh√¥ng kh√≠ --</option>
                        <option value="Joyful, festive, energetic atmosphere">Vui t∆∞∆°i, nh·ªôn nh·ªãp</option>
                        <option value="Peaceful, serene, cozy, warm lighting">·∫§m c√∫ng, b√¨nh y√™n</option>
                        <option value="Mysterious, magical, ethereal">Huy·ªÅn ·∫£o, lung linh</option>
                        <option value="Nostalgic, emotional, touching">Ho√†i ni·ªám, x√∫c ƒë·ªông</option>
                    </select>
                    <select id="prompt-lighting">
                        <option value="">-- Ch·ªçn √Ånh s√°ng --</option>
                        <option value="Cinematic lighting, dramatic shadows">ƒêi·ªán ·∫£nh (Cinematic)</option>
                        <option value="Natural sunlight, golden hour">Gi·ªù v√†ng (N·∫Øng ·∫•m)</option>
                        <option value="Soft studio lighting, rim light">Studio m·ªÅm m·∫°i</option>
                        <option value="Neon lights, glowing">Neon ph√°t s√°ng</option>
                    </select>
                </div>
                <div class="controls">
                    <select id="prompt-camera">
                        <option value="">-- Ch·ªçn G√≥c m√°y --</option>
                        <option value="Wide angle, panoramic view">G√≥c r·ªông (To√†n c·∫£nh)</option>
                        <option value="Macro shot, extreme close-up">C·∫≠n c·∫£nh (Macro)</option>
                        <option value="Drone view, aerial shot">Flycam (T·ª´ tr√™n cao)</option>
                        <option value="Portrait lens, bokeh background">Ch√¢n dung (X√≥a ph√¥ng)</option>
                    </select>
                    <select id="prompt-ratio">
                        <option value="--ar 16:9">Ngang (16:9 - PC)</option>
                        <option value="--ar 9:16">D·ªçc (9:16 - ƒêT)</option>
                        <option value="--ar 1:1">Vu√¥ng (1:1 - Avatar)</option>
                    </select>
                    <button onclick="generateImagePrompt()">T·∫°o L·ªánh ·∫¢nh</button>
                </div>

                <div id="prompt-result" class="hidden" style="margin-top: 20px;">
                    <label style="font-weight:bold; color:var(--tet-red); display:block; margin-bottom:5px;">L·ªánh t·∫°o ·∫£nh c·ªßa b·∫°n (Copy d√≤ng n√†y):</label>
                    <textarea id="generated-prompt" readonly style="width:100%; height:120px; padding:10px; border:2px solid var(--tet-gold); border-radius:5px; background:#fff; color:#333; font-family: monospace; font-size: 1.1rem;"></textarea>
                    <div style="margin-top:10px; text-align:center;">
                        <button onclick="copyPrompt()" style="background:#4caf50;"><i class="fas fa-copy"></i> Copy L·ªánh</button>
                    </div>
                </div>
                <p class="ai-disclaimer">*L∆∞u √Ω: AI t·∫°o l·ªánh ·∫£nh c√≥ th·ªÉ kh√¥ng hi·ªÉu h·∫øt √Ω ƒë·ªì ngh·ªá thu·∫≠t ph·ª©c t·∫°p.</p>
            </section>

            <!-- NEW: Thi·ªáp T·∫øt Online -->
            <section id="tet-card-creator" class="card tab-content">
                <h3><i class="fas fa-id-card"></i> T·∫°o Thi·ªáp T·∫øt Online (Pro)</h3>
                <p style="text-align: center; margin-bottom: 10px; font-size: 0.9rem; color: #ccc;">üí° M·∫πo: K√©o th·∫£ ƒë·ªÉ di chuy·ªÉn v·∫≠t th·ªÉ. Ch·ªçn v·∫≠t th·ªÉ ƒë·ªÉ x√≥a ho·∫∑c ch·ªânh s·ª≠a.</p>
                
                <!-- Toolbar -->
                <div class="card-toolbar" style="background: rgba(0,0,0,0.3); padding: 10px; border-radius: 10px; margin-bottom: 15px;">
                    <!-- Tab 1: ·∫¢nh N·ªÅn -->
                    <div style="margin-bottom: 10px; border-bottom: 1px dashed rgba(255,255,255,0.2); padding-bottom: 10px;">
                        <label style="color: var(--tet-gold); font-weight: bold;"><i class="fas fa-image"></i> ·∫¢nh N·ªÅn:</label>
                        <div class="controls" style="margin-top: 5px;">
                            <input type="file" id="card-upload" accept="image/*" onchange="handleImageUpload(event)" style="font-size: 0.8rem;">
                            <button onclick="resetCardCanvas()" style="background: #d32f2f; font-size: 0.8rem; padding: 8px;">X√≥a Tr·∫Øng</button>
                        </div>
                        <div class="controls" style="align-items: center;">
                            <label style="font-size: 0.8rem;">Zoom:</label>
                            <input type="range" id="bg-scale" min="0.1" max="3" step="0.1" value="1" oninput="updateBackgroundProp()">
                            <label style="font-size: 0.8rem;">Xoay:</label>
                            <input type="range" id="bg-rotate" min="-180" max="180" step="5" value="0" oninput="updateBackgroundProp()">
                        </div>
                    </div>

                    <!-- Tab 2: Sticker & Text -->
                    <div style="margin-bottom: 10px;">
                        <label style="color: var(--tet-gold); font-weight: bold;"><i class="fas fa-icons"></i> Trang Tr√≠:</label>
                        <div class="sticker-list" style="display: flex; gap: 10px; overflow-x: auto; padding: 5px 0; margin-bottom: 10px;">
                            <button onclick="addSticker('üå∏')" class="sticker-btn">üå∏</button>
                            <button onclick="addSticker('üåº')" class="sticker-btn">üåº</button>
                            <button onclick="addSticker('üßß')" class="sticker-btn">üßß</button>
                            <button onclick="addSticker('üèÆ')" class="sticker-btn">üèÆ</button>
                            <button onclick="addSticker('üêç')" class="sticker-btn">üêç</button>
                            <button onclick="addSticker('üí∞')" class="sticker-btn">üí∞</button>
                            <button onclick="addSticker('üéÜ')" class="sticker-btn">üéÜ</button>
                            <button onclick="addSticker('2Ô∏è‚É£0Ô∏è‚É£2Ô∏è‚É£6Ô∏è‚É£')" class="sticker-btn" style="font-size: 0.8rem; width: auto;">2026</button>
                        </div>
                        <div class="controls">
                            <input type="text" id="new-text-input" placeholder="Nh·∫≠p ch·ªØ mu·ªën th√™m..." style="flex: 2;">
                            <input type="color" id="new-text-color" value="#ffd700" style="width: 40px; padding: 2px; height: 42px;">
                            <button onclick="addTextObject()" style="background: #2196f3;"><i class="fas fa-plus"></i> Th√™m Ch·ªØ</button>
                        </div>
                    </div>

                    <!-- Tab 3: Khung & Xu·∫•t -->
                    <div class="controls" style="border-top: 1px dashed rgba(255,255,255,0.2); padding-top: 10px;">
                        <select id="card-frame" onchange="renderCard()">
                            <option value="none">-- Kh√¥ng Khung --</option>
                            <option value="red">Khung ƒê·ªè May M·∫Øn</option>
                            <option value="gold">Khung V√†ng T√†i L·ªôc</option>
                            <option value="flower">Khung Hoa ƒê√†o</option>
                            <option value="modern">Khung K√≠nh Hi·ªán ƒê·∫°i</option>
                        </select>
                        <button id="btn-delete-obj" onclick="deleteSelectedObject()" style="background: #ff5722; display: none;"><i class="fas fa-trash"></i> X√≥a Ch·ªçn</button>
                        <button onclick="downloadCard()" style="background: #4caf50;"><i class="fas fa-download"></i> T·∫£i V·ªÅ</button>
                    </div>
                </div>
                
                <div id="canvas-container" style="text-align: center; margin-top: 10px; overflow: hidden; border: 2px solid var(--tet-gold); border-radius: 5px; position: relative; touch-action: none;">
                    <canvas id="card-canvas"></canvas>
                </div>
            </section>

            <!-- NEW: T·∫≠p Th·ªÉ D·ª•c -->
            <section id="exercise-section" class="card tab-content">
                <h3><i class="fas fa-running"></i> R√®n Luy·ªán S·ª©c Kh·ªèe Ng√†y T·∫øt</h3>
                <p style="text-align: center; margin-bottom: 20px;">"ƒÇn T·∫øt kh√¥ng qu√™n gi·ªØ d√°ng". Ch·ªçn th·ªùi gian v√† b·∫Øt ƒë·∫ßu t·∫≠p luy·ªán c√πng nh·∫°c s√¥i ƒë·ªông!</p>
                <div class="controls" style="justify-content: center; gap: 15px;">
                    <button onclick="startExercise(10)" style="background: linear-gradient(45deg, #ff9800, #f57c00);">10 Ph√∫t</button>
                    <button onclick="startExercise(20)" style="background: linear-gradient(45deg, #4caf50, #388e3c);">20 Ph√∫t</button>
                    <button onclick="startExercise(30)" style="background: linear-gradient(45deg, #2196f3, #1976d2);">30 Ph√∫t</button>
                </div>
            
                <div id="exercise-status" class="hidden" style="text-align: center; margin-top: 20px;">
                    <video id="exercise-video" src="theduc.mp4" loop playsinline style="width: 100%; max-height: 300px; border-radius: 10px; margin-bottom: 10px;"></video>
                    <p>Ngu·ªìn video: V·∫†N S·ª∞ NH∆Ø √ù | TR√öC NH√ÇN x DTAP | L√ÄN S√ìNG XANH 2025</p>
                    <div style="font-size: 3rem; font-weight: bold; color: #d00000;" id="exercise-timer">00:00</div>
                    <p>ƒêang ph√°t nh·∫°c t·∫≠p luy·ªán...</p>
                    <button onclick="stopExercise()" style="background: #d32f2f; margin-top: 10px;">D·ª´ng T·∫≠p</button>
                </div>
            </section>

            <!-- 7. Th·ª≠ th√°ch ch√©o -->
            <section id="exchange-challenge" class="card tab-content">
                <h3><i class="fas fa-random"></i> V√≤ng Quay L√¨ X√¨ Ch√©o</h3>
                <div class="controls">
                    <textarea id="participants" placeholder="Nh·∫≠p t√™n ng∆∞·ªùi ch∆°i (m·ªói t√™n 1 d√≤ng)"></textarea>
                    <div class="row">
                        <input type="number" id="min-amount" placeholder="Min (VNƒê)">
                        <input type="number" id="max-amount" placeholder="Max (VNƒê)">
                    </div>
                    <div class="row" style="margin-top: 10px; width: 100%; display: flex; justify-content: center;">
                         <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; color: var(--tet-red); font-weight: bold;">
                            <input type="checkbox" id="exchange-task" style="width: auto;"> K√®m th·ª≠ th√°ch vui nh·ªôn
                        </label>
                    </div>
                    <button onclick="runExchange()">B·∫Øt ƒê·∫ßu Random</button>
                </div>
                <div id="exchange-result" class="result-list hidden"></div>
                <div class="legal-warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>C·∫¢NH B√ÅO:</strong> T√≠nh nƒÉng ch·ªâ h·ªó tr·ª£ gh√©p ƒë√¥i t·∫∑ng qu√† vui v·∫ª. Nghi√™m c·∫•m s·ª≠ d·ª•ng ƒë·ªÉ t·ªï ch·ª©c c·ªù b·∫°c tr√° h√¨nh.
                </div>
            </section>

            <!-- 8. T·∫°o QR L√¨ X√¨ -->
            <section id="vietqr-generator" class="card tab-content">
                <h3><i class="fas fa-qrcode"></i> T·∫°o M√£ L√¨ X√¨ VietQR</h3>
                <div class="controls">
                    <select id="bank-list">
                        <option value="">-- Ch·ªçn Ng√¢n H√†ng --</option>
                        <!-- Danh s√°ch ng√¢n h√†ng s·∫Ω ƒë∆∞·ª£c JS th√™m v√†o -->
                    </select>
                    <input type="text" id="bank-account" placeholder="S·ªë t√†i kho·∫£n">
                    <input type="text" id="account-name" placeholder="T√™n ch·ªß t√†i kho·∫£n (Vi·∫øt hoa, kh√¥ng d·∫•u)">
                    <input type="number" id="qr-amount" placeholder="S·ªë ti·ªÅn (ƒê·ªÉ tr·ªëng n·∫øu mu·ªën t·ª± nh·∫≠p)">
                </div>
                <div class="controls">
                    <input type="text" id="qr-content" placeholder="N·ªôi dung chuy·ªÉn kho·∫£n (T·ªëi ƒëa 50 k√Ω t·ª±)">
                    <button onclick="generateQRContent()" style="flex: 0 0 auto;"><i class="fas fa-magic"></i> AI G·ª£i √ù</button>
                </div>
                <button onclick="createVietQR()" style="width: 100%; margin-top: 10px;">T·∫°o M√£ QR</button>
                <div id="qr-result" class="result-box hidden" style="text-align: center;"></div>
                <p class="ai-disclaimer">*L∆∞u √Ω: Ki·ªÉm tra k·ªπ th√¥ng tin ng√¢n h√†ng tr∆∞·ªõc khi chuy·ªÉn kho·∫£n.</p>
                <div class="legal-warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>TU√ÇN TH·ª¶ PH√ÅP LU·∫¨T:</strong> Ch·ªâ s·ª≠ d·ª•ng ƒë·ªÉ l√¨ x√¨ m·ª´ng tu·ªïi. Nghi√™m c·∫•m d√πng m√£ QR ƒë·ªÉ thanh to√°n cho c√°c ho·∫°t ƒë·ªông c·ªù b·∫°c, c√° ƒë·ªô.
                </div>
            </section>
        </main>
    </div>

    <!-- N√∫t B·∫≠t/T·∫Øt Nh·∫°c -->
    <button id="music-toggle" onclick="toggleMusic()">
        <i class="fas fa-music"></i>
    </button>

    <!-- N√∫t H∆∞·ªõng D·∫´n -->
    <button onclick="toggleHelp()" class="help-btn">
        <i class="fas fa-question"></i>
    </button>

    <!-- Modal H∆∞·ªõng D·∫´n -->
    <div id="help-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative; display: block; animation: popIn 0.3s ease;">
            <button onclick="toggleHelp()" style="position: absolute; top: 10px; right: 10px; background: transparent; color: #333; font-size: 1.5rem; box-shadow: none; padding: 0;"><i class="fas fa-times"></i></button>
            <h2 style="color: var(--tet-red); text-align: center; margin-bottom: 20px;">Gi·ªõi Thi·ªáu T√≠nh NƒÉng</h2>
            <div style="line-height: 1.6; color: #fff; text-align: left;">
                <p><strong>1. Tr·ª£ L√Ω AI:</strong> So·∫°n l·ªùi ch√∫c, l√†m th∆°, c√¢u ƒë·ªëi T·∫øt t·ª± ƒë·ªông.</p>
                <p><strong>2. Chia L√¨ X√¨:</strong> Chia ti·ªÅn ng·∫´u nhi√™n, t√¨m "Vua L√¨ X√¨".</p>
                <p><strong>3. Gieo Qu·∫ª & X√¥ng ƒê·∫•t:</strong> Xem v·∫≠n h·∫°n v√† tu·ªïi x√¥ng nh√†.</p>
                <p><strong>4. T·∫°o L·ªánh ·∫¢nh (M·ªõi):</strong> AI gi√∫p vi·∫øt c√¢u l·ªánh ti·∫øng Anh chu·∫©n ƒë·ªÉ b·∫°n t·∫°o ·∫£nh tr√™n Midjourney/Bing.</p>
                <p><strong>5. ƒê·ªë Vui Th·ª≠ Th√°ch:</strong> Tr·∫£ l·ªùi c√¢u h·ªèi, t·ª± ƒë·ªông l∆∞u ƒëi·ªÉm v√†o B·∫£ng T·ªïng S·∫Øp.</p>
                <p><strong>6. B·∫£ng T·ªïng S·∫Øp:</strong> Xem danh s√°ch cao th·ªß (L∆∞u tr·ªØ vƒ©nh vi·ªÖn).</p>
            </div>
        </div>
    </div>

    <!-- Modal Donate -->
    <div id="donate-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 400px; width: 90%; position: relative; display: block; animation: popIn 0.3s ease; text-align: center;">
            <button onclick="closeDonateModal()" style="position: absolute; top: 10px; right: 10px; background: transparent; color: #fff; font-size: 1.5rem; box-shadow: none; padding: 0;"><i class="fas fa-times"></i></button>
            <h3 style="color: var(--tet-gold); margin-bottom: 15px;">üßß ·ª¶ng H·ªô T√°c Gi·∫£ üßß</h3>
            <p style="color: #fff; margin-bottom: 15px;">Nh·∫≠p s·ªë ti·ªÅn b·∫°n mu·ªën donate (Tu·ª≥ t√¢m):</p>
            <input type="number" id="donate-amount" placeholder="VD: 10000, 20000, 50000..." style="width: 100%; margin-bottom: 15px; text-align: center; font-size: 1.2rem; font-weight: bold;">
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="confirmDonate()" style="background: linear-gradient(45deg, #e91e63, #c2185b); width: 100%;">T·∫°o M√£ QR</button>
            </div>
            <p style="font-size: 0.8rem; color: #ccc; margin-top: 10px;">*M√£ QR s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông qua VietQR</p>
        </div>
    </div>

    <!-- Modal Leaderboard (M·ªõi) -->
    <div id="leaderboard-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; align-items: center; justify-content: center;">
        <div class="card" id="leaderboard-content" style="max-width: 700px; width: 95%; max-height: 90vh; overflow-y: auto; position: relative; display: block; animation: popIn 0.3s ease;">
            <button onclick="closeLeaderboardModal()" style="position: absolute; top: 10px; right: 10px; background: transparent; color: #fff; font-size: 1.5rem; box-shadow: none; padding: 0;"><i class="fas fa-times"></i></button>
            <h3 style="color: var(--tet-gold); text-align: center;"><i class="fas fa-trophy"></i> B·∫£ng T·ªïng S·∫Øp Cao Th·ªß</h3>
            
            <div class="controls no-capture" style="justify-content: center; margin-bottom: 15px;">
                <button onclick="loadLeaderboard(10)" style="background: #4caf50; font-size: 0.8rem;">Top 10 C√¢u</button>
                <button onclick="loadLeaderboard(20)" style="background: #ff9800; font-size: 0.8rem;">Top 20 C√¢u</button>
                <button onclick="loadLeaderboard(30)" style="background: #f44336; font-size: 0.8rem;">Top 30 C√¢u</button>
                <button onclick="loadLeaderboard('catch-lixi')" style="background: #e91e63; font-size: 0.8rem;">Top H·ª©ng L·ªôc</button>
            </div>

            <table class="leaderboard-table">
                <thead><tr><th>H·∫°ng</th><th>Ng∆∞·ªùi Ch∆°i</th><th>ƒêi·ªÉm</th><th>Ng√†y</th></tr></thead>
                <tbody id="leaderboard-body"></tbody>
            </table>

            <div class="share-section no-capture" style="margin-top: 20px; text-align: center; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px;">
                <p style="margin-bottom: 10px; font-size: 0.9rem; color: #ccc;">Khoe th√†nh t√≠ch ngay:</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button onclick="captureLeaderboard()" style="background: #2196f3;"><i class="fas fa-camera"></i> T·∫£i ·∫¢nh K·∫øt Qu·∫£</button>
                    <button onclick="shareWebsite()" style="background: #1877f2;"><i class="fab fa-facebook"></i> Share Web</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ƒêƒÉng Nh·∫≠p -->
    <div id="login-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 400px; width: 90%; position: relative; display: block; animation: popIn 0.3s ease; text-align: center;">
            <button onclick="closeLoginModal()" style="position: absolute; top: 10px; right: 10px; background: transparent; color: #fff; font-size: 1.5rem; box-shadow: none; padding: 0;"><i class="fas fa-times"></i></button>
            <h3 style="color: var(--tet-gold); margin-bottom: 20px;">ƒêƒÉng Nh·∫≠p</h3>
            
            <!-- Tab chuy·ªÉn ƒë·ªïi -->
            <div class="login-tabs" style="display: flex; justify-content: center; gap: 10px; margin-bottom: 15px;">
                <button onclick="switchAnonTab('login')" id="tab-login" class="active" style="flex: 1; font-size: 0.9rem; background: var(--tet-gold); color: #d00000; border: 1px solid var(--tet-gold);">ƒêƒÉng Nh·∫≠p</button>
                <button onclick="switchAnonTab('register')" id="tab-register" style="flex: 1; font-size: 0.9rem; background: transparent; border: 1px solid #fff; color: #fff;">ƒêƒÉng K√Ω Kh√°ch</button>
            </div>

            <!-- Form ƒêƒÉng Nh·∫≠p -->
            <div id="anon-login-form">
                <p>T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn</p>
            </div>

            <!-- Form ƒêƒÉng K√Ω (C·∫•p t√†i kho·∫£n) -->
            <div id="anon-register-form" class="hidden" style="text-align: center; margin-bottom: 10px;">
               <p>T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn</p>
            </div>

          <br>  <div style="margin: 10px 0; border-top: 1px solid rgba(255,255,255,0.2); position: relative;"><span style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: #4a0404; padding: 0 10px; font-size: 0.8rem; color: #ccc;">HO·∫∂C</span></div>

            <div style="display: flex; flex-direction: column; gap: 15px;">
                <br>
                <button onclick="loginWithGoogle()" style="background: #fff; color: #444; display: flex; align-items: center; justify-content: center; gap: 10px; padding: 12px;">
                    <i class="fab fa-google" style="color: #DB4437;"></i> Ti·∫øp t·ª•c v·ªõi Google
                </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Hi·ªÉn Th·ªã T√†i Kho·∫£n (Credential Modal) -->
    <div id="credential-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10001; align-items: center; justify-content: center;">
        <div class="card" id="credential-card" style="max-width: 400px; width: 90%; text-align: center; border: 2px solid var(--tet-gold); animation: popIn 0.3s ease;">
            <h3 style="color: var(--tet-red); text-transform: uppercase; margin-bottom: 10px;"><i class="fas fa-exclamation-triangle"></i> L∆ØU √ù QUAN TR·ªåNG</h3>
            <p style="color: #fff; margin-bottom: 15px;">H√£y <strong>L∆ØU L·∫†I</strong> th√¥ng tin b√™n d∆∞·ªõi ƒë·ªÉ ƒëƒÉng nh·∫≠p l·∫°i sau n√†y!</p>
            
            <div style="background: #fff; color: #333; padding: 15px; border-radius: 10px; margin-bottom: 15px; text-align: left;">
                <div style="margin-bottom: 5px;"><strong>Username:</strong> <span id="cred-username" style="font-family: monospace; font-size: 1.2rem; color: #d00000; font-weight: bold;"></span></div>
                <div><strong>Password:</strong> <span id="cred-password" style="font-family: monospace; font-size: 1.2rem; color: #d00000; font-weight: bold;"></span></div>
                <div style="font-size: 0.8rem; color: #666; margin-top: 5px; border-top: 1px dashed #ccc; padding-top: 5px;">
                    *M·∫≠t kh·∫©u n√†y c√≥ hi·ªáu l·ª±c trong <strong>6 ti·∫øng</strong>. Sau ƒë√≥ h·ªá th·ªëng s·∫Ω c·∫•p m·∫≠t kh·∫©u m·ªõi khi b·∫°n ƒëƒÉng nh·∫≠p.
                </div>
            </div>

            <div style="display: flex; gap: 10px; flex-direction: column;">
                <button onclick="captureCredential()" style="background: #2196f3; color: #fff; width: 100%;"><i class="fas fa-download"></i> L∆∞u ·∫¢nh T√†i Kho·∫£n</button>
                <button onclick="closeCredentialModal()" style="background: var(--tet-gold); color: #d00000; width: 100%; font-weight: bold;">ƒê√£ L∆∞u - V√†o Ngay</button>
            </div>
        </div>
    </div>

    <!-- Modal H·ªì S∆° C·ªßa T√¥i (M·ªõi) -->
    <div id="profile-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 500px; width: 95%; position: relative; display: block; animation: popIn 0.3s ease;">
            <button onclick="closeProfileModal()" style="position: absolute; top: 10px; right: 10px; background: transparent; color: #fff; font-size: 1.5rem; box-shadow: none; padding: 0;"><i class="fas fa-times"></i></button>
            
            <div style="text-align: center; margin-bottom: 20px;">
                <img id="profile-avatar" src="" style="width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--tet-gold); object-fit: cover; margin-bottom: 10px;">
                <h3 id="profile-name" style="color: var(--tet-gold); margin: 0; border: none;">T√™n Ng∆∞·ªùi D√πng</h3>
                <div id="profile-titles" style="margin-top: 5px;">
                    <!-- Danh hi·ªáu s·∫Ω ƒë∆∞·ª£c JS th√™m v√†o -->
                </div>
            </div>

            <div id="profile-stats-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; max-height: 300px; overflow-y: auto; padding-right: 5px;">
                <!-- Stats will be injected here -->
            </div>
            
            <button id="btn-reset-pass" onclick="resetAnonPassword()" style="background: #ff9800; color: #fff; width: 100%; margin-bottom: 10px; display: none;"><i class="fas fa-key"></i> C·∫•p l·∫°i m·∫≠t kh·∫©u m·ªõi</button>
            <button onclick="resetUserStats()" style="background: transparent; border: 1px solid #ff6b6b; color: #ff6b6b; width: 100%; margin-bottom: 10px; font-size: 0.9rem;"><i class="fas fa-trash-alt"></i> X√≥a d·ªØ li·ªáu th·ªëng k√™</button>

            <p style="text-align: center; font-size: 0.8rem; color: #888; font-style: italic;">*D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ v√† ƒë·ªìng b·ªô khi ƒëƒÉng nh·∫≠p.</p>
        </div>
    </div>

    <!-- Modal C√†i ƒë·∫∑t API -->
    <div id="api-settings-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10002; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 400px; width: 90%; position: relative; display: block; animation: popIn 0.3s ease; text-align: center;">
            <button onclick="closeApiSettings()" style="position: absolute; top: 10px; right: 10px; background: transparent; color: #fff; font-size: 1.5rem; box-shadow: none; padding: 0;"><i class="fas fa-times"></i></button>
            <h3 style="color: var(--tet-gold); margin-bottom: 15px;">C·∫•u H√¨nh API Key</h3>
            <p style="color: #ccc; font-size: 0.9rem; margin-bottom: 15px;">Nh·∫≠p API Key Groq c·ªßa b·∫°n ƒë·ªÉ s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng AI kh√¥ng gi·ªõi h·∫°n.</p>
            
            <input type="password" id="input-api-key" placeholder="gsk_..." style="width: 100%; margin-bottom: 10px; text-align: center;">
            
            <label style="color: #ccc; font-size: 0.8rem; display: block; margin-bottom: 5px; text-align: left;">Ch·ªçn Model AI:</label>
            <select id="input-api-model" style="width: 100%; margin-bottom: 15px; background: #333; color: #fff; border: 1px solid #555; padding: 8px; border-radius: 5px;">
                <option value="llama-3.3-70b-versatile">Llama 3.3 70B (M·∫∑c ƒë·ªãnh - Th√¥ng minh nh·∫•t)</option>
                <option value="llama-3.1-8b-instant">Llama 3.1 8B (Si√™u nhanh)</option>
                <option value="mixtral-8x7b-32768">Mixtral 8x7B (C√¢n b·∫±ng)</option>
                <option value="gemma2-9b-it">Gemma 2 9B (Google)</option>
            </select>

            <div style="display: flex; gap: 5px; margin-bottom: 15px;">
                 <button onclick="saveApiKey()" style="background: #4caf50; flex: 1;">L∆∞u Key</button>
                 <button onclick="deleteApiKey()" style="background: #f44336; flex: 1;">X√≥a Key</button>
            </div>
            
            <p style="font-size: 0.8rem; color: #888;">
                <a href="https://console.groq.com/keys" target="_blank" style="color: var(--tet-gold);">L·∫•y Key mi·ªÖn ph√≠ t·∫°i ƒë√¢y</a>
            </p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
